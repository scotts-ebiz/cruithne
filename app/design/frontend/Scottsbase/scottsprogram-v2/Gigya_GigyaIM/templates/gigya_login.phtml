<?php
/**
 * Output Gigya login form html.
 * defined in GigyaIM\view\frontend\layout\customer_account_login.xml
 * The block for this form is - GigyaIM\Block\Form\Gigyalogin which is mapped to Magento Customer block. mapped in di.xml
 *
 * Here: add accounts.showScreenSet to gigyaInit array
 * Full flow (on gigya_script):
 * Call gigya screen sets.
 * Capture Gigya login event.
 * Create and submit registration form.
 * Submit to Gigya model Controller.
 **/

/** @var \Gigya\GigyaIM\Block\Form\GigyaLogin $block */

$display = $block->getData('display');
$placeholderElementId = $display == 'embed' ? 'gigya-login-embed' : 'gigya-login-popup';

?>
<div class="block-customer-login">
    <div class="block-content" aria-labelledby="block-customer-login-heading">
        <?php if ($display == 'embed'): ?>
            <!-- Gigya login screen placeholder - id can be dynamic: -->
            <div id="<?php echo $placeholderElementId; ?>" class="gigya-login gigya-loader-location"></div>
        <?php endif; ?>
        <?php echo $block->getBlockHtml('formkey'); ?>
        <script type="text/x-magento-init">
            {
                "*": {
                    "Gigya_GigyaIM/js/gigya-init": {
                        "screenSet": "<?php echo $block->getLoginDesktopScreensetId() ?>",
                        "containerID": "<?php echo $placeholderElementId; ?>",
                        "mobileScreenSet": "<?php echo $block->getLoginMobileScreensetId() ?>",
                        "display": "<?php echo $display ?>"
                    }
                }
            }
        </script>
    </div>
</div>
