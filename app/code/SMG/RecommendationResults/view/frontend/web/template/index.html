<!--ko if: hasResults()-->
<div class="sp-text-center sp-px-8 md:sp-px-0 md:sp-container sp-mb-8">
    <h1 class="sp-results__title sp-h1 sp-text-green-1">Your Lawn Plan</h1>

    <p class="sp-text-center sp-max-w-md sp-mx-auto">
        Get ready to grow a thick, strong, green lawn! Your plan contains everything you need to take care of all
        <strong data-bind="if: lawnArea() > 0"><span data-bind="text: lawnArea()"></span> square feet</strong> of your
        <span data-bind="if: lawnType()"><strong data-bind="text: lawnType()"></strong></span> lawn in every season.
    </p>

    <a class="sp-block sp-link sp-text-center sp-label">Doesn't look right? Take the quiz again!</a>
</div>

<!-- ko if: results().plan -->
<div class="sp-results__your-plan sp-pt-8 sp-pb-4 sp-mx-8 md:sp-mx-auto sp-rounded sp-my-8 md:sp-my-12">
    <h2 class="sp-text-center sp-h4 sp-m-0 sp-mb-4 sp-uppercase">Your Plan</h2>

    <ul class="sp-results__list sp-flex sp-flex-row sp-flex-wrap sp-m-0 sp-p-0 sp-justify-center"
        data-bind="foreach: products()">
        <li class="sp-results__your-plan-product sp-text-center sp-m-0 sp-mx-6">
            <img class="sp-align-center sp-mb-1 sp-results__product-image"
                 data-bind="attr: { src: $data.thumbnailImage }" />
            <div class="sp-text-center sp-p2"
                 data-bind="text: season"></div>
            <strong class="sp-text-center sp-label"
                    data-bind="text: $parent.formatCurrency(price)"></strong>
        </li>
    </ul>
</div>

<div class="sp-mb-16 sp-max-w-xl sp-mx-auto sp-w-full">
    <div class="sp-flex sp-justify-end sp-mr-8 md:sp-mr-0 sp-my-4">
        <button class="sp-link">Save and Send Results</button>
    </div>

    <!-- Sidebar -->
    <div class="md:sp-flex">
        <ul class="sp-p-0 sp-results__tabs"
            data-bind="foreach: products()">
            <li class="sp-results__list sp-mb-0"
                data-bind="css: {'sp-bg-green-4': ($index() === $parent.activeProductIndex())}">
                <button type="button"
                        data-bind="click: function() { $parent.activeProductIndex($index()) }"
                        class="sp-results__tabs-button sp-flex sp-align-center sp-py-8 sp-px-4">
                    <img class="sp-mr-4 sp-results__icon--small"
                         data-bind="attr: { src: $parent.getSeasonIcon($data) }" />
                    <div>
                        <strong class="sp-h4"
                                data-bind="text: season"></strong>
                        <div class="sp-p2"
                             data-bind="if: $parent.nextAvailableProduct() === $index()">(Next Shipment)</div>
                        <div class="sp-p2"><span data-bind="text: $parent.formatDate(applicationStartDate)"></span> -
                            <span data-bind="text: $parent.formatDate(applicationEndDate)"></span></div>
                    </div>
                </button>

            </li>
        </ul>

        <!-- Product Detail -->
        <!-- ko if: activeProduct() -->
        <div class="sp-results__tabs-detail sp-bg-green-4 sp-flex-auto sp-p-8 md:sp-p-12">
            <div class="md:sp-flex sp-mb-12">
                <div class="md:sp-w-1/2">
                    <h3 class="sp-my-0 sp-h2 sp-text-green-1"
                        data-bind="text: activeProduct().season"></h3>
                    <div>Apply between</div>
                    <div><span data-bind="text: formatDate(activeProduct().applicationStartDate)"></span> - <span
                              data-bind="text: formatDate(activeProduct().applicationEndDate)"></span></div>
                </div>

                <ul class="sp-results__list sp-p-0 sp-m-0 md:sp-w-1/2 md:sp-justify-end sp-flex sp-flex-wrap sp--mx-2"
                    data-bind="foreach: productFeatures(activeProduct())">
                    <li class="sp-text-center sp-m-0 sp-mx-2">
                        <img class="sp-results__icon--medium"
                             data-bind="attr: { src: $data }" />
                    </li>
                </ul>
            </div>

            <div class="sp-results__in-this-box sp-flex sp-flex-wrap sp-justify-between sp-mb-4">
                <h4 class="sp-my-0 sp-h4 sp-gree-2 sp-pb-4 sp-uppercase">Products in this box</h4>
            </div>

            <p data-bind="if: activeProduct().mentioned">Because you mentioned <strong class="sp-lowercase"
                        data-bind="text: activeProduct().mentioned"></strong>:</p>

            <div class="sp-results__product sp-m--4 sp-bg-white sp-flex sp-rounded">
                <img class="sp-mx-auto sp-m-4 sp-results__product-image sp-block"
                     data-bind="attr: { src: activeProduct().thumbnailImage }" />

                <div class="sp-m-4">
                    <div class="sp-flex sp-mb-2">
                        <div class="sp-results__bag-count sp-label sp-mr-2 sp-flex sp-justify-center sp-items-center sp-label sp-uppercase"
                             data-bind="text: activeProduct().quantity"></div>
                        <span>Bag Count</span>
                    </div>

                    <h5 class="sp-mt-0 sp-mb-4 sp-h4"
                        data-bind="text: activeProduct().displayName">
                    </h5>
                    <div class="sp-p2"
                         data-bind="html: activeProduct().short_description">
                    </div>
                    <button class="sp-link sp-uppercase"
                            data-bind="click: togglePDP">more about this product</button>
                </div>
            </div>
        </div>
        <!-- /ko -->
    </div>
</div>

<!-- ko if: showPDP()  -->
<div id="pdp-modal-wrapper">
    <div id="pdp-modal"
         class="sp-max-w-lg sp-bg-white sp-px-8 sp-py-12 sp-text-center md:sp-text-left sp-rounded">

        <button class="pdp-modal-close"
                data-bind="click: togglePDP"></button>

        <div class="md:sp-flex sp-max-w-xl sp-mx-auto sp-mb-8">
            <img data-bind="attr: { src: activeProduct().mediumImage }"
                 class="sp-mx-auto sp-block sp-w-1/3 sp-max-w-xs md:sp-w-2/5 sp-mb-8" />

            <div class="md:sp-ml-8">
                <strong class="
                 sp-block
                 sp-h4
                 sp-my-0
                 sp-mb-2"
                        data-bind="text: formatCurrency(activeProduct().price)"></strong>

                <h2 class="sp-h2 sp-my-0 sp-mb-4"
                    data-bind="text: activeProduct().displayName"></h2>

                <div class="sp-p2"
                     data-bind="html: activeProduct().description">
                </div>

                <hr class="sp-my-8" />

                <div class="md:sp-flex sp-items-center">
                    <button class="sp-label sp-uppercase sp-mb-2 md:sp-mb-0 md:sp-mr-8 sp-flex-no-shrink sp-button--primary"
                            data-bind="click: addToOrder"
                            type="button">add to order</button>

                    <p class="sp-mb-0">If you add these products to your order, they will be included in the first
                        shipment only.</p>
                </div>
            </div>
        </div>

        <div class="sp-tabs sp-max-w-lg sp-mb-12 sp-mx-auto">
            <button class="sp-tab"
                    data-bind="
                        click: category.bind($data, 'learn'),
                        css: { 'active': category() === 'learn' },
                    "
                    type="button">
                learn
            </button>

            <button class="sp-tab"
                    data-bind="
                        click: category.bind($data, 'product_specs'),
                        css: { 'active': category() === 'product_specs' },
                    "
                    type="button">
                product specs
            </button>
        </div>


        <div data-bind="if: category() === 'learn'"
             class="sp-px-8 sp-max-w-lg sp-mx-auto">
            <h3 class="sp-h4">How To Use</h3>
            <div data-bind="html: activeProduct().howToApply"></div>

            <h3 class="sp-h4">When To Use</h3>
            <p data-bind="text: activeProduct().season"></p>

            <h3 class="sp-h4">Spreader Settings</h3>
            <div data-bind="html: activeProduct().spreaderSettings"></div>

            <hr />
            <p>Please always follow package instructions.</p>
        </div>

        <div data-bind="if: category() === 'product_specs'"
             class="sp-px-8 sp-max-w-lg sp-mx-auto">
            <h3 class="sp-h4">Label</h3>
            <div data-bind="html: activeProduct().howToApply"></div>
            <img data-bind="attr { src: activeProduct().image_label }" />

            <h3 class="sp-h4">Weight</h3>
            <div>
                <span data-bind="text: activeProduct().weight"></span>
                <span data-bind="text: activeProduct()['Product Weight UOM']"></span>
            </div>

            <h3 class="sp-h4">Coverage Area</h3>
            <div data-bind="html: activeProduct().coverageArea"></div>
        </div>
    </div>
</div>
<!-- /ko -->


<div class="sp-bg-green-1 sp-py-4">
    <div class="sp-container sp-flex sp-flex-column md:sp-flex-row sp-justify-end">
        <button class="sp-link sp-link--inverted md:sp-mr-12 sp-order-1 md:sp-order-0">
            Save and Send Results
        </button>
        <a class="sp-button sp-button--inverted sp-order-0 md:sp-order-1 sp-mb-4 md:sp-mb-0"
           href="/subscription-options">
            Continue to Subscription Options
        </a>
    </div>
</div>
<!-- /ko results().plan -->
<!-- /ko -->
