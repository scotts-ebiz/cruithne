<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Vantiv\Payment\Model\Ui\CcConfigProvider" type="SMG\Vantiv\Model\Ui\CcConfigProvider" />
    <preference for="Vantiv\Payment\Helper\Vault" type="SMG\Vantiv\Helper\Vault" />
    <preference for="Vantiv\Payment\Gateway\Cc\Builder\TokenBuilder" type="SMG\Vantiv\Gateway\Cc\Builder\TokenBuilder" />
	<preference for="Vantiv\Payment\Gateway\Common\Builder\BillToAddressBuilder" type="SMG\Vantiv\Gateway\Common\Builder\BillToAddressBuilder" />
	<preference for="Vantiv\Payment\Gateway\Common\Builder\EnhancedDataBuilder" type="SMG\Vantiv\Gateway\Common\Builder\EnhancedDataBuilder" />

    <!-- Vantiv KeyPad Facade -->
    <virtualType name="SMG\Vantiv\Model\VantivKeyPadFacade" type="Vantiv\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig::METHOD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">SMG\Vantiv\Block\Form\KeyPad</argument>
            <argument name="infoBlockType" xsi:type="string">SMG\Vantiv\Block\Info\KeyPad</argument>
            <argument name="commandPool" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\CommandPool</argument>
            <argument name="validatorPool" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\PaymentValidatorPool</argument>
            <argument name="valueHandlerPool" xsi:type="object">SMG\Vantiv\Gateway\KeyPaD\Config\ConfigValueHandlerPool</argument>
        </arguments>
    </virtualType>
    <type name="SMG\Vantiv\Model\Ui\KeyPadConfigProvider">
        <arguments>
            <argument name="method" xsi:type="object">SMG\Vantiv\Model\VantivKeyPadFacade</argument>
        </arguments>
    </type>
    <virtualType name="SMG\Vantiv\Model\VantivKeyPadVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig::VAULT_CODE</argument>
            <argument name="config" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">SMG\Vantiv\Model\VantivKeyPadFacade</argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\CommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\CommandPool</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="vantiv_keypadpayment" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\CommandManager</item>
            </argument>
        </arguments>
    </type>
    <type name="SMG\Vantiv\Controller\Vault\KeyPadSave">
        <arguments>
            <argument name="commandManager" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\CommandManager</argument>
        </arguments>
    </type>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultAuthorizeCommand</item>
                <item name="void" xsi:type="string">Vantiv\Payment\Gateway\Cc\VoidCommand</item>
                <item name="capture" xsi:type="string">Vantiv\Payment\Gateway\Cc\CaptureCommand</item>
                <item name="sale" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultSaleCommand</item>
                <item name="refund" xsi:type="string">Vantiv\Payment\Gateway\Cc\RefundCommand</item>
                <item name="cancel" xsi:type="string">Vantiv\Payment\Gateway\Cc\CancelCommand</item>
                <item name="accept_payment" xsi:type="string">Vantiv\Payment\Gateway\Cc\AcceptCommand</item>
                <item name="deny_payment" xsi:type="string">Vantiv\Payment\Gateway\Cc\DenyCommand</item>
                <item name="vault_authorize" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultAuthorizeCommand</item>
                <item name="vault_sale" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultSaleCommand</item>
                <item name="register_token" xsi:type="string">Vantiv\Payment\Gateway\Cc\RegisterTokenCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\PaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\CountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPaD\Config\ConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\Config\ConfigValueHandler</item>
                <item name="model" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandler</item>
                <item name="active" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandler</item>
                <item name="title" xsi:type="string">SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\Config\VaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadVaultConfig</argument>
        </arguments>
    </virtualType>
    <type name="SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig::METHOD_CODE</argument>
        </arguments>
    </type>
    <virtualType name="SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadVaultConfig" type="SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">SMG\Vantiv\Gateway\KeyPad\Config\VantivKeyPadConfig::VAULT_CODE</argument>
        </arguments>
    </virtualType>
</config>